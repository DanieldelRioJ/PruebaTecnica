import { Injectable } from '@angular/core';
import { environment } from '../../../../environments/environment';
import { ApiService } from '../../../core/services/api.service';
import { IWeatherResponse } from '../models/weather-response.model';
import { IWeatherInput } from '../models/weather-input.model';
import { delay, of } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class WeatherApiService {
  private readonly BASE_URL = environment.API_URL;

  constructor(private readonly _apiService: ApiService) {}

  getData(params: IWeatherInput) {
    return of({
      queryCost: 11,
      latitude: 43.0774,
      longitude: -8.40716,
      resolvedAddress: 'Ordes, Galicia, Espa√±a',
      address: 'Ordes',
      timezone: 'Europe/Madrid',
      tzoffset: 2,
      days: [
        {
          datetime: '2023-09-06',
          datetimeEpoch: 1693951200,
          tempmax: 27.4,
          tempmin: 17.5,
          temp: 21.6,
          feelslikemax: 28.3,
          feelslikemin: 17.5,
          feelslike: 21.7,
          dew: 16.6,
          humidity: 74.3,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 35.3,
          windspeed: 16.5,
          winddir: 187,
          pressure: 1015,
          cloudcover: 58.4,
          visibility: 20.1,
          solarradiation: 145.7,
          solarenergy: 12.7,
          uvindex: 5,
          severerisk: 10,
          sunrise: '08:02:58',
          sunriseEpoch: 1693980178,
          sunset: '21:00:32',
          sunsetEpoch: 1694026832,
          moonphase: 0.71,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08008099999',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-07',
          datetimeEpoch: 1694037600,
          tempmax: 26.9,
          tempmin: 17.3,
          temp: 21.3,
          feelslikemax: 27.6,
          feelslikemin: 17.3,
          feelslike: 21.3,
          dew: 16.9,
          humidity: 77.3,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 38.2,
          windspeed: 20.6,
          winddir: 210,
          pressure: 1014.8,
          cloudcover: 45.6,
          visibility: 18.2,
          solarradiation: 158.3,
          solarenergy: 13.7,
          uvindex: 7,
          severerisk: 10,
          sunrise: '08:04:03',
          sunriseEpoch: 1694066643,
          sunset: '20:58:46',
          sunsetEpoch: 1694113126,
          moonphase: 0.75,
          conditions: 'Partially cloudy',
          description: 'Clearing in the afternoon.',
          icon: 'partly-cloudy-day',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08008099999',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-08',
          datetimeEpoch: 1694124000,
          tempmax: 25.5,
          tempmin: 16.8,
          temp: 21.1,
          feelslikemax: 25.5,
          feelslikemin: 16.8,
          feelslike: 21.1,
          dew: 17.3,
          humidity: 80,
          precip: 1.961,
          precipprob: 100,
          precipcover: 12.5,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 32.4,
          windspeed: 14.1,
          winddir: 289.9,
          pressure: 1014.8,
          cloudcover: 42.9,
          visibility: 18.6,
          solarradiation: 178.4,
          solarenergy: 15.3,
          uvindex: 7,
          severerisk: 10,
          sunrise: '08:05:08',
          sunriseEpoch: 1694153108,
          sunset: '20:56:59',
          sunsetEpoch: 1694199419,
          moonphase: 0.78,
          conditions: 'Rain, Partially cloudy',
          description:
            'Partly cloudy throughout the day with late afternoon rain.',
          icon: 'rain',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-09',
          datetimeEpoch: 1694210400,
          tempmax: 22.6,
          tempmin: 15.8,
          temp: 19.1,
          feelslikemax: 22.6,
          feelslikemin: 15.8,
          feelslike: 19.1,
          dew: 16.9,
          humidity: 87.9,
          precip: 26.211,
          precipprob: 100,
          precipcover: 62.5,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 39.2,
          windspeed: 15.3,
          winddir: 177.8,
          pressure: 1013.9,
          cloudcover: 54.6,
          visibility: 15.3,
          solarradiation: 170.5,
          solarenergy: 14.5,
          uvindex: 7,
          severerisk: 30,
          sunrise: '08:06:14',
          sunriseEpoch: 1694239574,
          sunset: '20:55:13',
          sunsetEpoch: 1694285713,
          moonphase: 0.81,
          conditions: 'Rain, Partially cloudy',
          description:
            'Becoming cloudy in the afternoon with a chance of rain throughout the day.',
          icon: 'rain',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-10',
          datetimeEpoch: 1694296800,
          tempmax: 24.3,
          tempmin: 15.1,
          temp: 19.3,
          feelslikemax: 24.3,
          feelslikemin: 15.1,
          feelslike: 19.3,
          dew: 16.1,
          humidity: 82.9,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 28.4,
          windspeed: 12.7,
          winddir: 196,
          pressure: 1015.9,
          cloudcover: 38.5,
          visibility: 18.5,
          solarradiation: 147.7,
          solarenergy: 12.7,
          uvindex: 6,
          severerisk: 10,
          sunrise: '08:07:19',
          sunriseEpoch: 1694326039,
          sunset: '20:53:26',
          sunsetEpoch: 1694372006,
          moonphase: 0.84,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-11',
          datetimeEpoch: 1694383200,
          tempmax: 23.1,
          tempmin: 16,
          temp: 19,
          feelslikemax: 23.1,
          feelslikemin: 16,
          feelslike: 19,
          dew: 16.8,
          humidity: 87.8,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 22,
          windspeed: 11.7,
          winddir: 295.2,
          pressure: 1015.9,
          cloudcover: 62.7,
          visibility: 15.5,
          solarradiation: 100,
          solarenergy: 8.6,
          uvindex: 4,
          severerisk: 30,
          sunrise: '08:08:24',
          sunriseEpoch: 1694412504,
          sunset: '20:51:39',
          sunsetEpoch: 1694458299,
          moonphase: 0.88,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-12',
          datetimeEpoch: 1694469600,
          tempmax: 23,
          tempmin: 15.6,
          temp: 18.7,
          feelslikemax: 23,
          feelslikemin: 15.6,
          feelslike: 18.7,
          dew: 16.6,
          humidity: 88.3,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 34.2,
          windspeed: 15.8,
          winddir: 12.9,
          pressure: 1018.1,
          cloudcover: 63.9,
          visibility: 11,
          solarradiation: 140.6,
          solarenergy: 12.2,
          uvindex: 8,
          severerisk: 10,
          sunrise: '08:09:30',
          sunriseEpoch: 1694498970,
          sunset: '20:49:51',
          sunsetEpoch: 1694544591,
          moonphase: 0.91,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: [
            'D8991',
            '08001099999',
            'LECO',
            'LEST',
            '08008099999',
            '08042099999',
            '08002099999',
            '08044099999'
          ],
          source: 'obs'
        },
        {
          datetime: '2023-09-13',
          datetimeEpoch: 1694556000,
          tempmax: 24,
          tempmin: 14.3,
          temp: 18.9,
          feelslikemax: 24,
          feelslikemin: 14.3,
          feelslike: 18.9,
          dew: 16.4,
          humidity: 86.6,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 39.6,
          windspeed: 17.7,
          winddir: 22.5,
          pressure: 1020.5,
          cloudcover: 36.9,
          visibility: 9.2,
          solarradiation: 130,
          solarenergy: 11.1,
          uvindex: 5,
          severerisk: 10,
          sunrise: '08:10:35',
          sunriseEpoch: 1694585435,
          sunset: '20:48:03',
          sunsetEpoch: 1694630883,
          moonphase: 0.94,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: ['D8991', 'LECO', 'LEST'],
          source: 'obs'
        },
        {
          datetime: '2023-09-14',
          datetimeEpoch: 1694642400,
          tempmax: 28.2,
          tempmin: 14.6,
          temp: 20.7,
          feelslikemax: 28.2,
          feelslikemin: 14.6,
          feelslike: 20.8,
          dew: 16.2,
          humidity: 78.6,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 19.4,
          windspeed: 9.8,
          winddir: 90.7,
          pressure: 1016.8,
          cloudcover: 26.8,
          visibility: 9.4,
          solarradiation: 199.9,
          solarenergy: 17.1,
          uvindex: 7,
          severerisk: 10,
          sunrise: '08:11:41',
          sunriseEpoch: 1694671901,
          sunset: '20:46:15',
          sunsetEpoch: 1694717175,
          moonphase: 0.98,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: ['D8991', 'LECO', 'F1389', 'LEST'],
          source: 'obs'
        },
        {
          datetime: '2023-09-15',
          datetimeEpoch: 1694728800,
          tempmax: 24,
          tempmin: 16.3,
          temp: 19.8,
          feelslikemax: 24,
          feelslikemin: 16.3,
          feelslike: 19.8,
          dew: 17.1,
          humidity: 85.5,
          precip: 0,
          precipprob: 0,
          precipcover: 0,
          preciptype: null,
          snow: 0,
          snowdepth: 0,
          windgust: 35.3,
          windspeed: 15.5,
          winddir: 238.2,
          pressure: 1010.1,
          cloudcover: 43.9,
          visibility: 10,
          solarradiation: 84.7,
          solarenergy: 7.2,
          uvindex: 6,
          severerisk: 10,
          sunrise: '08:12:46',
          sunriseEpoch: 1694758366,
          sunset: '20:44:27',
          sunsetEpoch: 1694803467,
          moonphase: 0,
          conditions: 'Partially cloudy',
          description: 'Partly cloudy throughout the day.',
          icon: 'partly-cloudy-day',
          stations: ['LECO', 'F1389', 'LEST'],
          source: 'obs'
        },
        {
          datetime: '2023-09-16',
          datetimeEpoch: 1694815200,
          tempmax: 22.4,
          tempmin: 14.9,
          temp: 18.6,
          feelslikemax: 22.4,
          feelslikemin: 14.9,
          feelslike: 18.6,
          dew: 14.6,
          humidity: 78.9,
          precip: 0.6,
          precipprob: 100,
          precipcover: 20.83,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 56.2,
          windspeed: 20.2,
          winddir: 174.1,
          pressure: 1005.7,
          cloudcover: 48.3,
          visibility: 14.5,
          solarradiation: 161.9,
          solarenergy: 13.9,
          uvindex: 6,
          severerisk: 10,
          sunrise: '08:13:52',
          sunriseEpoch: 1694844832,
          sunset: '20:42:39',
          sunsetEpoch: 1694889759,
          moonphase: 0.05,
          conditions: 'Rain, Partially cloudy',
          description: 'Partly cloudy throughout the day with rain.',
          icon: 'rain',
          stations: ['D8991', 'LECO', 'F1389', 'LEST'],
          source: 'comb'
        },
        {
          datetime: '2023-09-17',
          datetimeEpoch: 1694901600,
          tempmax: 17.8,
          tempmin: 13.1,
          temp: 15.6,
          feelslikemax: 17.8,
          feelslikemin: 13.1,
          feelslike: 15.6,
          dew: 12.3,
          humidity: 80.9,
          precip: 10.8,
          precipprob: 95.2,
          precipcover: 58.33,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 54.4,
          windspeed: 22,
          winddir: 164.5,
          pressure: 1003.8,
          cloudcover: 93.9,
          visibility: 21.1,
          solarradiation: 73,
          solarenergy: 6.4,
          uvindex: 3,
          severerisk: 10,
          sunrise: '08:14:57',
          sunriseEpoch: 1694931297,
          sunset: '20:40:51',
          sunsetEpoch: 1694976051,
          moonphase: 0.08,
          conditions: 'Rain, Overcast',
          description: 'Cloudy skies throughout the day with rain.',
          icon: 'rain',
          stations: null,
          source: 'fcst'
        },
        {
          datetime: '2023-09-18',
          datetimeEpoch: 1694988000,
          tempmax: 19.6,
          tempmin: 12.8,
          temp: 16,
          feelslikemax: 19.6,
          feelslikemin: 12.8,
          feelslike: 16,
          dew: 13.7,
          humidity: 86.4,
          precip: 1.8,
          precipprob: 95.2,
          precipcover: 29.17,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 29.9,
          windspeed: 11.5,
          winddir: 243.3,
          pressure: 1016.3,
          cloudcover: 80.7,
          visibility: 15.9,
          solarradiation: 60.1,
          solarenergy: 5.1,
          uvindex: 3,
          severerisk: 10,
          sunrise: '08:16:03',
          sunriseEpoch: 1695017763,
          sunset: '20:39:02',
          sunsetEpoch: 1695062342,
          moonphase: 0.12,
          conditions: 'Rain, Partially cloudy',
          description:
            'Partly cloudy throughout the day with a chance of rain throughout the day.',
          icon: 'rain',
          stations: null,
          source: 'fcst'
        },
        {
          datetime: '2023-09-19',
          datetimeEpoch: 1695074400,
          tempmax: 22.5,
          tempmin: 9.7,
          temp: 15.4,
          feelslikemax: 22.5,
          feelslikemin: 9.7,
          feelslike: 15.4,
          dew: 11.9,
          humidity: 81.5,
          precip: 0,
          precipprob: 47.6,
          precipcover: 0,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 19.4,
          windspeed: 7.9,
          winddir: 206.2,
          pressure: 1020.1,
          cloudcover: 49.2,
          visibility: 24.1,
          solarradiation: 109.2,
          solarenergy: 9.4,
          uvindex: 5,
          severerisk: 10,
          sunrise: '08:17:09',
          sunriseEpoch: 1695104229,
          sunset: '20:37:14',
          sunsetEpoch: 1695148634,
          moonphase: 0.15,
          conditions: 'Rain, Partially cloudy',
          description:
            'Partly cloudy throughout the day with a chance of rain.',
          icon: 'rain',
          stations: null,
          source: 'fcst'
        },
        {
          datetime: '2023-09-20',
          datetimeEpoch: 1695160800,
          tempmax: 20.2,
          tempmin: 13.1,
          temp: 16.4,
          feelslikemax: 20.2,
          feelslikemin: 13.1,
          feelslike: 16.4,
          dew: 14.2,
          humidity: 87.6,
          precip: 0.1,
          precipprob: 66.7,
          precipcover: 4.17,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 50,
          windspeed: 22,
          winddir: 205.9,
          pressure: 1015,
          cloudcover: 92,
          visibility: 23.4,
          solarradiation: 168.5,
          solarenergy: 14.5,
          uvindex: 7,
          severerisk: 10,
          sunrise: '08:18:15',
          sunriseEpoch: 1695190695,
          sunset: '20:35:25',
          sunsetEpoch: 1695234925,
          moonphase: 0.19,
          conditions: 'Rain, Overcast',
          description:
            'Cloudy skies throughout the day with late afternoon rain.',
          icon: 'rain',
          stations: null,
          source: 'fcst'
        },
        {
          datetime: '2023-09-21',
          datetimeEpoch: 1695247200,
          tempmax: 18.2,
          tempmin: 11.2,
          temp: 15.8,
          feelslikemax: 18.2,
          feelslikemin: 11.2,
          feelslike: 15.8,
          dew: 12.7,
          humidity: 83.4,
          precip: 15.3,
          precipprob: 76.2,
          precipcover: 33.33,
          preciptype: ['rain'],
          snow: 0,
          snowdepth: 0,
          windgust: 43.9,
          windspeed: 15.8,
          winddir: 268.8,
          pressure: 1013.2,
          cloudcover: 73.5,
          visibility: 19.7,
          solarradiation: 188.4,
          solarenergy: 16.4,
          uvindex: 6,
          severerisk: 10,
          sunrise: '08:19:21',
          sunriseEpoch: 1695277161,
          sunset: '20:33:37',
          sunsetEpoch: 1695321217,
          moonphase: 0.22,
          conditions: 'Rain, Partially cloudy',
          description:
            'Partly cloudy throughout the day with a chance of rain throughout the day.',
          icon: 'rain',
          stations: null,
          source: 'fcst'
        }
      ],
      stations: {
        D8991: {
          distance: 16399,
          latitude: 43.188,
          longitude: -8.54,
          useCount: 0,
          id: 'D8991',
          name: 'DW8991 Laracha ES',
          quality: 0,
          contribution: 0
        },
        '08001099999': {
          distance: 32214,
          latitude: 43.367,
          longitude: -8.417,
          useCount: 0,
          id: '08001099999',
          name: 'LA CORUNA, SP',
          quality: 99,
          contribution: 0
        },
        LECO: {
          distance: 24878,
          latitude: 43.3,
          longitude: -8.38,
          useCount: 0,
          id: 'LECO',
          name: 'LECO',
          quality: 50,
          contribution: 0
        },
        F1389: {
          distance: 27875,
          latitude: 43.328,
          longitude: -8.409,
          useCount: 0,
          id: 'F1389',
          name: 'FW1389 La Coruna ES',
          quality: 0,
          contribution: 0
        },
        LEST: {
          distance: 19835,
          latitude: 42.9,
          longitude: -8.43,
          useCount: 0,
          id: 'LEST',
          name: 'LEST',
          quality: 50,
          contribution: 0
        },
        '08008099999': {
          distance: 77925,
          latitude: 43.117,
          longitude: -7.45,
          useCount: 0,
          id: '08008099999',
          name: 'LUGO ROZAS, SP',
          quality: 98,
          contribution: 0
        },
        '08042099999': {
          distance: 20170,
          latitude: 42.896,
          longitude: -8.415,
          useCount: 0,
          id: '08042099999',
          name: 'SANTIAGO, SP',
          quality: 100,
          contribution: 0
        },
        '08002099999': {
          distance: 25131,
          latitude: 43.302,
          longitude: -8.377,
          useCount: 0,
          id: '08002099999',
          name: 'A CORUNA, SP',
          quality: 99,
          contribution: 0
        },
        '08044099999': {
          distance: 73717,
          latitude: 42.433,
          longitude: -8.617,
          useCount: 0,
          id: '08044099999',
          name: 'PONTEVEDRA, SP',
          quality: 99,
          contribution: 0
        }
      }
    }).pipe(delay(3000));
    return this._apiService.get<IWeatherResponse>(
      `${this.BASE_URL}/${params.location}/${params.from}/${params.to}`,
      {
        unitGroup: 'metric',
        contentType: 'json'
      }
    );
  }
}
